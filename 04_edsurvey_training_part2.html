<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Using R and Generative AI for NAEP Data Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="EdSurvey Team" />
    <script src="libs/header-attrs-2.25/header-attrs.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
          jax: ["input/TeX","output/HTML-CSS"],
          tex2jax: {
              inlineMath: [['$','$'],["\\(","\\)"]],
              processEscapes: true,
          },
      });
    </script>
    <link rel="stylesheet" href="naep-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: inverse, title-slide

&lt;hr&gt;

The R EdSurvey Package
========================================================

## Using R and Generative AI for NAEP Data Analysis: Part Two


&lt;hr&gt;
&lt;br&gt;

**Presenters**: Sinan Yavuz, Ting Zhang, Paul Bailey, Blue Webb and Emmanuel Sikali


_April 2024_

.logo[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]

---

Goal
========================================================
&lt;br&gt;



## Provide participants with an overview of the methods used to analyze large-scale assessment data using the R package `EdSurvey` and generative AI chatbot-EdSurveyGPT

&lt;br&gt;

Follow along in [edsurvey_training_part2.R](edsurvey_training_part2.R)

---

Outline of EdSurvey Session: Part Two
========================================================


- Summary Statistics: `summary2` and `edsurveyTable`
- Gap Analysis
- Linear Regression
- Logistic Regression

---

Loading NAEP
========================================================

Read NAEP Primer data:


```r
library(EdSurvey)
```

```
## Loading required package: car
```

```
## Loading required package: carData
```

```
## Loading required package: lfactors
```

```
## lfactors v1.0.4
```

```
## Loading required package: Dire
```

```
## Dire v2.2.0
```

```
## EdSurvey v4.0.4
```

```
## 
## Attaching package: 'EdSurvey'
```

```
## The following objects are masked from 'package:base':
## 
##     cbind, rbind
```

```r
sdf &lt;- readNAEP(system.file("extdata/data", "M36NT2PM.dat", 
                            package="NAEPprimer"))
```

---

class: inverse, section-slide

Summary Statistics
========================================================
&lt;hr class="sectionSlide"&gt;
.logoSection[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]

---

Summary Statistics
========================================================
**`summary2()`** produces both weighted and unweighted descriptive statistics for a variable. **`summary2()`** takes the four following arguments in order:
- **`data`**: an `EdSurvey` object
- **`variable`**: name of the variable you want to produce statistics on
- **`weightVar`**: name of the weight variable, or `NULL` if users want to produce unweighted statistics
- **`dropOmittedLevels`**: if `TRUE`, the function will remove omitted levels for the specified variable before producing descriptive statistics. If `FALSE`, the function will include omitted levels in the output statistics.

---

Summary Statistics
========================================================

For a continuous variable (i.e., composite Math score):


```r
summary2(data = sdf, variable = "composite")
```

```
## Estimates are weighted using the weight variable 'origwt'
##    Variable     N Weighted N   Min.  1st Qu.   Median     Mean  3rd Qu.    Max.      SD NA's Zero weights
## 1 composite 16915   16932.46 126.11 251.9626 277.4784 275.8892 301.1827 404.184 36.5713    0            0
```

- For NAEP data and other datasets that have a default weight variable, `summary2` produces weighted statistics by default. 
- If a specified `variable` is a scale name (e.g., `composite`) and the weight option is selected, `summary2` statistics account for both plausible value pooling and weighting.

---

Summary Statistics
========================================================

For a continuous variable (i.e., composite Math score):
- By specifying `weightVar = NULL`, the function prints out unweighted descriptive statistics for the `variable`, or each plausible value of the specified scale (e.g., `composite`).


```r
summary2(sdf, "composite", weightVar = NULL)
```

```
## Estimates are not weighted.
##   Variable     N   Min.  1st Qu. Median     Mean  3rd Qu.   Max.       SD NA's
## 1   mrpcm1 16915 130.53 252.0600 277.33 275.8606 300.7200 410.80 35.89864    0
## 2   mrpcm2 16915 124.16 252.2100 277.33 275.6399 300.6900 408.58 36.08483    0
## 3   mrpcm3 16915 115.09 252.0017 277.19 275.6570 300.5600 398.17 36.09278    0
## 4   mrpcm4 16915 137.19 252.4717 277.44 275.7451 300.5767 407.41 35.91078    0
## 5   mrpcm5 16915 123.58 252.4900 277.16 275.6965 300.5000 395.96 36.10905    0
```

---

Summary Statistics
========================================================

For a categorical variable (i.e., frequency of students talking about studies at home):


```r
summary2(sdf, "b017451")
```

```
## Estimates are weighted using the weight variable 'origwt'
##                b017451    N Weighted N Weighted Percent Weighted Percent SE
## 1 Never or hardly ever 3837  3952.4529      23.34245648           0.4318975
## 2 Once every few weeks 3147  3190.8945      18.84483329           0.3740648
## 3    About once a week 2853  2937.7148      17.34960077           0.3414566
## 4  2 or 3 times a week 3362  3425.8950      20.23270282           0.3156289
## 5            Every day 3132  3223.8074      19.03921080           0.4442216
## 6              Omitted  575   194.3312       1.14768416           0.1272462
## 7             Multiple    9     7.3676       0.04351168           0.0191187
```

- By default, `dropOmittedLevels` is set to `FALSE`. That is, the function includes omitted levels of the variable `b017451` in the output statistics.    

---

Summary Statistics
========================================================

For a categorical variable (i.e., frequency of students talking about studies at home):
- By specifying `dropOmittedLevels = TRUE`, the function removes omitted levels from the output statistics.   



```r
summary2(sdf, "b017451", dropOmittedLevels = TRUE)
```

```
## Estimates are weighted using the weight variable 'origwt'
##                b017451    N Weighted N Weighted Percent Weighted Percent SE
## 1 Never or hardly ever 3837   3952.453         23.62386           0.4367548
## 2 Once every few weeks 3147   3190.894         19.07202           0.3749868
## 3    About once a week 2853   2937.715         17.55876           0.3486008
## 4  2 or 3 times a week 3362   3425.895         20.47662           0.3196719
## 5            Every day 3132   3223.807         19.26874           0.4467063
```


---

Cross Tabulation - Let's ask EdSurveyGPT
========================================================

- Which function should I use to get crosstab in EdSurvey? 
- Feel free to ask follow up questions; examples, arguments, etc.

---

Cross Tabulation
========================================================
**`edsurveyTable()`**: creates a summary table of outcome and categorical variables. There are three important arguments: 
- **`formula`**: typically written as `a ~ b + c`, in which:
  - `a`: a continuous variable (optional) that the function will return the weighted mean for
  - `b` and `c`: categorical variable(s) that the function will run cross-tabulation on; multiple cross-tab 
  categorical variables can be separated using the `+` symbol
- **`data`**: an `EdSurvey` object
- `pctAggregationLevel`: a numeric value (i.e., 0, 1, 2) that indicates the level of aggregation in the cross-tabulation result's percentage column. 

---

Cross Tabulation
========================================================

- Summary table of NAEP composite mathematics performance scale scores (`composite`) of eighth-grade students by two student factors:
  - `dsex`: gender
  - `b017451`: frequency of talk about studies at home
- `pctAggregationLevel` is set by default to `NULL` (or `1`). That is, the `PCT` column adds up to 100 within each level of the first categorical variable `dsex`. 


```r
es1 &lt;- edsurveyTable(composite ~ dsex + b017451, data = sdf)
```



&lt;div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:30%; overflow-x: scroll; width:100%; "&gt;&lt;table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt; dsex &lt;/th&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt; b017451 &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; WTD_N &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; PCT &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; SE(PCT) &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; MEAN &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; SE(MEAN) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Never or hardly ever &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2350 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2434.844 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.00978 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6959418 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 270.8243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.057078 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Once every few weeks &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1603 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1638.745 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.52472 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5020657 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 275.0807 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.305922 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; About once a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1423.312 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.95795 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5057265 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 281.5612 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.409587 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 or 3 times a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1535 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1563.393 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.62694 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4811497 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 284.9066 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.546072 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Every day &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1291 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1332.890 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.88062 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5872731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 277.2597 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.795784 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Never or hardly ever &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1487 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1517.609 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.20203 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5078805 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 266.7897 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.519020 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Once every few weeks &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1544 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1552.149 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.61630 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4892491 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 271.2255 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.205528 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; About once a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1469 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1514.403 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.16358 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5782966 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 278.7502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.719778 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 or 3 times a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1827 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1862.502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.33864 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4844840 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 282.7765 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.404107 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Every day &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1841 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1890.918 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.67945 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6553039 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 275.4628 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.219439 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt;


---

Cross Tabulation
========================================================

- By specifying `pctAggregationLevel = 0`, the `PCT` column adds up to 100 across the entire sample.         


```r
es2 &lt;- edsurveyTable(composite ~ dsex + b017451, data = sdf, pctAggregationLevel = 0)
```


&lt;div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:60%; overflow-x: scroll; width:100%; "&gt;&lt;table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt; dsex &lt;/th&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"&gt; b017451 &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; WTD_N &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; PCT &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; SE(PCT) &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; MEAN &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"&gt; SE(MEAN) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Never or hardly ever &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2350 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2434.844 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.553095 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3738531 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 270.8243 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.057078 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Once every few weeks &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1603 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1638.745 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.794803 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2651368 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 275.0807 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.305922 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; About once a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1384 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1423.312 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.507154 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2770233 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 281.5612 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.409587 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 or 3 times a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1535 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1563.393 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.344421 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2670298 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 284.9066 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.546072 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Every day &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1291 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1332.890 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.966700 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3000579 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 277.2597 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.795784 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Never or hardly ever &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1487 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1517.609 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.070768 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2984443 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 266.7897 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.519020 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Once every few weeks &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1544 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1552.149 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.277216 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2498498 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 271.2255 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.205528 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; About once a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1469 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1514.403 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.051606 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2899668 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 278.7502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.719778 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 or 3 times a week &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1827 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1862.502 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.132198 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2552321 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 282.7765 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.404107 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Every day &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1841 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1890.918 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.302039 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3497982 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 275.4628 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.219439 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt;

- Related documentation: [EdSurvey-LaTeXtables.pdf](https://www.air.org/sites/default/files/EdSurvey-LaTeXtables.pdf)

---

Think, Pair, Share: edsurveyTable
========================================================

Could you identify the number of plausible values, the replicate weight settings, and the variance method in the `edsurveyTable` output?

Why is the n used smaller than the full-data n? 

&lt;img src="presentationFigures/edsurveyTable_TPS.PNG" width="1736" /&gt;
  
---

Think, Pair, Share: edsurveyTable
========================================================

How would you use `edsurveyTable` to create a summary table with these parameters:

- overall math performance across subscales (`composite`)
- a variable that has to do with IEP status
- a variable that has to do with the number of books at home

Feel free use EdSurveyGPT:

- I want to create a crosstab using math composite score with IEP status and number of books at home on NAEP primer data set. Provide the necessary codes.

---

Think, Pair, Share: edsurveyTable
========================================================

Scenario result:


```r
edexercise &lt;- edsurveyTable(composite ~ iep + b013801,
                            weightVar = 'origwt', data = sdf)
edexercise
```

```
## 
## Formula: composite ~ iep + b013801 
## 
## Plausible values: 5
## jrrIMax: 1
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## full data n: 17606
## n used: 16351
## 
## 
## Summary Table:
##  iep b013801    N     WTD_N      PCT   SE(PCT)     MEAN  SE(MEAN)
##  Yes    0-10  304  297.1972 17.33406 1.0388812 226.1623 2.3075125
##  Yes   11-25  430  429.6252 25.05794 1.4034976 231.8103 2.3796081
##  Yes  26-100  517  530.9539 30.96795 1.5297784 249.2306 2.4682667
##  Yes    &gt;100  457  456.7507 26.64004 1.6556494 257.6787 2.8205193
##   No    0-10 1720 1890.3037 12.56502 0.4765198 257.6975 1.2861579
##   No   11-25 2936 3170.9954 21.07789 0.5632689 266.0401 0.9908671
##   No  26-100 5330 5350.4978 35.56524 0.6242526 281.5820 0.8305656
##   No    &gt;100 4657 4632.3807 30.79185 0.8511616 296.2606 1.0533164
```

---

Achievement Level Analysis and Percentile Analyses
========================================================

- EdSurvey presents many other features, two of them are Achievement Level Analysis and Percentile Analyses. See the related documentation for more information and example codes.

- [Analyses Using Achievement Levels Based on Plausible Values](https://www.air.org/resource/report/analyses-using-achievement-levels-based-plausible-values)


- [EdSurvey-Percentiles.pdf](https://www.air.org/sites/default/files/EdSurvey-Percentiles.pdf)

---

class: inverse, section-slide

Gap Analysis: Estimating the Difference between Two Groups
========================================================
&lt;hr class="sectionSlide"&gt;
.logoSection[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]


---
Gap Analysis
========================================================

**`gap()`:** estimate the difference in a statistic for two groups in the population. A gap occurs when one group outperforms another group and the difference in the statistics are statistically significant.

 - Statistics can be: 
  - mean scores
  - student group percentages
  - achievement level percentages
  - percentiles
  
- Variance estimation:
`$$\scriptsize Var(\theta_A-\theta_B)= Var(\theta_A) + Var(\theta_B) - 2 Cov(\theta_A,\theta_B)$$`

- Related methodology documentation: [EdSurvey-Gap.pdf](https://www.air.org/sites/default/files/EdSurvey-Gap.pdf)
---

Typical Gap Comparisons 
========================================================
- Comparisons of the same group/jurisdiction between years 

&lt;img src="presentationFigures/NAEP_Female_Trend_2022.png" width="70%" height="70%" /&gt;

---

Typical Gap Comparisons (cont.)
========================================================

- Comparisons of the gap of different groups/jurisdictions between years
  - Among racial/ethnic groups, the average mathematics score for White fourth-grade students was 29 points higher than their Black peers (compared to 25 points in 2019).

&lt;img src="presentationFigures/NAEP_BW_gap_2022.png" width="70%" height="70%" /&gt;

---

Within-Year Comparisons
========================================================
**Between students groups**

.codeScroll15[

```r
mathGap &lt;- gap(variable = "composite", data = sdf,
               groupA = dsex %in% "Male", 
               groupB = dsex %in% "Female")
```
]

- `groupA`:  defines a condition to subset data
  - `dsex %in% "Male"`
- `groupB`: defines a condition to subset data to compare to `groupA`
  - `dsex %in% "Female"`

---

Within-Year Comparisons (cont.)
========================================================

- Mean score results returned with `mathGap$results`


```r
mathGap$results
```

```
##   estimateA estimateAse estimateB estimateBse   diffAB     covAB  diffABse diffABpValue    dofAB
## 1  276.7235   0.8207151  275.0458   0.9402535 1.677756 0.5676583 0.6498719   0.01259479 53.70969
```

- `estimateA`/`estimateB`: value of estimate
- `estimateAse`/`estimateBse`: standard error of estimates
- `diffAB/diffABse`: difference between estimateA and estimateB and the standard error of the difference in group estimates
- `covAB`: the covariance used in calculating diffABse
- `diffABpValue`: the p-value associated with the t-test used for the hypothesis test that diffAB is zero
- `dofAB`: the degrees of freedom used in calculating diffABpValue

---
Gap Analysis: Summary
========================================================

Analyses:
  - mean scores
  - student group percentages
  - achievement level percentages
  - percentiles
  
Comparison types:
  - within year
  - between years (uses `edsurvey.data.frame.list`)

Learn more from the [EdSurvey User Guide](https://naep-research.airprojects.org/Portals/0/EdSurvey_A_Users_Guide/_book/descriptive-statistics.html#estimating-the-difference-in-two-statistics-with-gap)

---

Think, Pair, Share: Gap Analysis
========================================================

**A. Select Your Own Variables:** use EdSurvey functions to select variables of interest to calculate `gap` results


```r
# for reference
help(package = "EdSurvey")
searchSDF("text", sdf)
levelsSDF("myvar", sdf)
```

**B. Replicate This Scenario:** use EdSurvey functions to calculate `gap` results with these parameters:

- composite math performance at the proficient level or higher
- within-year comparisons of English language learners

---

Think, Pair, Share: Gap Analysis
========================================================

Scenario result:


```r
exerciseGap &lt;- gap(variable = "composite", data = sdf,
                   groupA = ell3 %in% "Yes", groupB = ell3 %in% "No",
                   achievementLevel = c("Proficient"))
exerciseGap$results
```

```
##         achievementLevel estimateA estimateAse estimateB estimateBse    diffAB      covAB diffABse diffABpValue    dofAB
## 1 At or Above Proficient  4.853979    1.372415  28.91917   0.8365519 -24.06519 -0.0565243 1.642069 1.014523e-07 9.263124
```

---

class: inverse, section-slide

Linear Regression
========================================================
&lt;hr class="sectionSlide"&gt;
.logoSection[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]

---

Linear Regression: lm.sdf()
========================================================

`lm.sdf()`: fits a linear model formula using sampling weights and a variance estimation method. 

The format is:

`myfit &lt;- lm.sdf(formula, data, weightVar, varMethod, relevels)`


- `formula`: model to be fit.
- `data`: an `EdSurvey` object containing the data to be used in fitting the model
- `weightVar`: indicates the weight variable to use.
- `varMethod`: the variance estimation method (Jackknife or Taylor series) with Jackknife as the default
- `relevels`: used when the user wants to change the reference level of a categorical variable
  
---

Linear Regression: lm.sdf()
========================================================

The resulting object (`myfit` in this case) is a list containing extensive information about the fitted model.

Formula notation is typically written as:

`Y ~ X1 + X2 + ... + Xk`

&lt;br&gt;

- The `~` separates the response variable on the left from the predictor variables on the right.
- The `+` sign separates the predictor variables.
&lt;br&gt;
 

---

Linear Regression: lm.sdf()
========================================================



Example of bivariate regression:

.codeScroll20[

```r
lm1 &lt;- lm.sdf(composite ~ b017451,
              weightVar = 'origwt', data = sdf)
summary(lm1)
```

```
## 
## Formula: composite ~ b017451
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## Plausible values: 5
## jrrIMax: 1
## full data n: 17606
## n used: 16331
## 
## Coefficients:
##                                 coef       se        t    dof  Pr(&gt;|t|)    
## (Intercept)                 269.2751   1.0259 262.4743 66.451 &lt; 2.2e-16 ***
## b017451Once every few weeks   3.9303   1.1736   3.3490 57.405  0.001437 ** 
## b017451About once a week     10.8370   1.2545   8.6387 54.713 8.383e-12 ***
## b0174512 or 3 times a week   14.4735   1.1928  12.1343 71.618 &lt; 2.2e-16 ***
## b017451Every day              6.9306   1.2886   5.3786 52.322 1.781e-06 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Multiple R-squared: 0.0208
```
]

---

Linear Regression: lm.sdf()
========================================================

Example of multiple regression:


```r
lm2 &lt;- lm.sdf(composite ~ dsex + b017451, 
              weightVar = 'origwt', data = sdf)
```

- The sampling weight for this regression: `origwt`

- How do these estimates account for the short test form?

- How do these estimates account for correlation within schools?

---

Linear Regression: lm.sdf()
========================================================


```r
summary(lm2)
```

```
## 
## Formula: composite ~ dsex + b017451
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## Plausible values: 5
## jrrIMax: 1
## full data n: 17606
## n used: 16331
## 
## Coefficients:
##                                  coef        se        t    dof  Pr(&gt;|t|)    
## (Intercept)                 270.41112   1.02443 263.9615 54.670 &lt; 2.2e-16 ***
## dsexFemale                   -2.95858   0.60423  -4.8965 54.991 8.947e-06 ***
## b017451Once every few weeks   4.23341   1.18327   3.5777 57.316 0.0007131 ***
## b017451About once a week     11.22612   1.25854   8.9200 54.683 2.983e-12 ***
## b0174512 or 3 times a week   14.94591   1.18665  12.5951 72.582 &lt; 2.2e-16 ***
## b017451Every day              7.52998   1.30846   5.7549 48.470 5.755e-07 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Multiple R-squared: 0.0224
```

---

Linear Regression: lm.sdf()
========================================================

Adding `src = TRUE` displays standardized regression coefficients.


```r
summary(lm2, src = TRUE)
```

```
## 
## Formula: composite ~ dsex + b017451
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## Plausible values: 5
## jrrIMax: 1
## full data n: 17606
## n used: 16331
## 
## Coefficients:
##                                    coef          se        t    dof   Pr(&gt;|t|) stdCoef    stdSE   
## (Intercept)                 270.4111210   1.0244340 263.9615 54.670 0.0000e+00      NA       NA   
## dsexFemale                   -2.9585783   0.6042285  -4.8965 54.991 8.9474e-06 -0.0407 0.008313 **
## b017451Once every few weeks   4.2334144   1.1832671   3.5777 57.316 7.1311e-04  0.0458 0.012791 * 
## b017451About once a week     11.2261232   1.2585369   8.9200 54.683 2.9834e-12  0.1175 0.013175 * 
## b0174512 or 3 times a week   14.9459085   1.1866461  12.5951 72.582 0.0000e+00  0.1659 0.013175 * 
## b017451Every day              7.5299837   1.3084558   5.7549 48.470 5.7550e-07  0.0817 0.014200 * 
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Multiple R-squared: 0.0224
```

---

Linear Regression: lm.sdf()
========================================================

Use `relevels` to set omitted/reference level of `dsex` to "Female":


```r
lm3 &lt;- lm.sdf(composite ~ dsex + b017451, 
              weightVar = 'origwt',
              relevels = list(dsex = "Female"), data = sdf)
```

- What does relevels argument do in lm.sdf? Provide example.

---

Linear Regression: lm.sdf()
========================================================


```r
summary(lm3)
```

```
## 
## Formula: composite ~ dsex + b017451
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## Plausible values: 5
## jrrIMax: 1
## full data n: 17606
## n used: 16331
## 
## Coefficients:
##                                  coef        se        t    dof  Pr(&gt;|t|)    
## (Intercept)                 267.45254   1.13187 236.2919 76.454 &lt; 2.2e-16 ***
## dsexMale                      2.95858   0.60423   4.8965 54.991 8.947e-06 ***
## b017451Once every few weeks   4.23341   1.18327   3.5777 57.316 0.0007131 ***
## b017451About once a week     11.22612   1.25854   8.9200 54.683 2.983e-12 ***
## b0174512 or 3 times a week   14.94591   1.18665  12.5951 72.582 &lt; 2.2e-16 ***
## b017451Every day              7.52998   1.30846   5.7549 48.470 5.755e-07 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Multiple R-squared: 0.0224
```

---

Think, Pair, Share: lm.sdf
========================================================

How would you use `lm.sdf` to perform a regression with multiple predictors using these parameters:

- overall math performance across subscales (`composite`)
- variable that has to do with computers at home
- variable that has to do with language other than English spoken in home

Feel free to use EdSurveyGPT.

---

Think, Pair, Share: lm.sdf
========================================================

Scenario result:


```r
lmexercise2 &lt;- lm.sdf(composite ~ b017101 + b018201,
                      weightVar = 'origwt', data = sdf)
summary(lmexercise2)
```

```
## 
## Formula: composite ~ b017101 + b018201
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## Plausible values: 5
## jrrIMax: 1
## full data n: 17606
## n used: 15884
## 
## Coefficients:
##                                 coef        se         t    dof  Pr(&gt;|t|)    
## (Intercept)                281.95112   0.80871 348.64281 43.827 &lt; 2.2e-16 ***
## b017101No                  -22.44306   1.36521 -16.43932 42.935 &lt; 2.2e-16 ***
## b018201Once in a while       0.63672   0.90717   0.70188 61.423    0.4854    
## b018201Half the time        -7.32985   1.58448  -4.62604 50.514 2.624e-05 ***
## b018201All or most of time -12.61417   1.27458  -9.89675 29.860 6.121e-11 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Multiple R-squared: 0.0658
```


---

Ask EdSurveyGPT
========================================================

- Can I run multilevel analyses with lm.sdf in edsurvey?

- Does EdSurvey account for the ICC between students in the cluster sampled schools?

---

class: inverse, section-slide

Logistic Regression
========================================================

&lt;hr class="sectionSlide"&gt;
.logoSection[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]

---

Logistic Regression
========================================================

**`logit.sdf()`** and  **`probit.sdf()`**: predict binary outcomes from a set of continuous predictor variables (sampling weights and variance estimates)

- `I()` is used to specify the outcome level of the `b013801` variable (books in home)

- `I()` treats certain characters or operators as mathematical operations rather than as part of the formula syntax, we can also use to create a dichotomous variable 


```r
logit1 &lt;- logit.sdf(I(b013801 %in% "&gt;100") ~ dsex,
                    weightVar = 'origwt', data = sdf)
```

---

Logistic Regression
========================================================


```r
summary(logit1)
```

```
## 
## Formula: b013801 ~ dsex
## Family: binomial (logit)
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## full data n: 17606
## n used: 16359
## 
## Coefficients:
##                   coef         se          t    dof  Pr(&gt;|t|)    
## (Intercept)  -0.920421   0.046355 -19.855835 60.636 &lt; 2.2e-16 ***
## dsexFemale    0.178274   0.050129   3.556331 54.578 0.0007863 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

The *log* odds of having more than 100 books in the home (versus less than or equal to 100 books) increases by 0.178274 for female students compared with male students.

---

Logistic Regression
========================================================


```r
oddsRatio(logit1)
```

```
##                    OR      2.5%     97.5%
## (Intercept) 0.3983511 0.3630823 0.4370459
## dsexFemale  1.1951531 1.0809029 1.3214796
```

Alternatively, the odds of having more than 100 books in the home (versus less than or equal to 100 books) increases by 1.1951531 for female students, compared with male students.

**Bonus point:** The Wald test is available for `logit.sdf` and `lm.sdf` models. See details in `?waldTest`.

- Related documentation: [EdSurvey-Wald Test.pdf](https://www.air.org/sites/default/files/EdSurvey-WaldTest.pdf)


---

Think, Pair, Share: Logistic Regression
========================================================

Use EdSurvey functions to perform a logistic regression and `logit.sdf` using these parameters:

- use an outcome variable that has to do with English Langauge Learners (ELL)
  - code it to 1 when `%in% "Yes"`
- use a predictor variable that has to do with language spoken at home

---

Think, Pair, Share: Logistic Regression
========================================================

Scenario result:


```r
logitexercise1 &lt;- logit.sdf(I(lep %in% "Yes") ~ b018201,
                          weightVar = 'origwt', data = sdf)
summary(logitexercise1)
```

```
## 
## Formula: lep ~ b018201
## Family: binomial (logit)
## 
## Weight variable: 'origwt'
## Variance method: jackknife
## JK replicates: 62
## full data n: 17606
## n used: 16159
## 
## Coefficients:
##                                 coef        se         t     dof  Pr(&gt;|t|)    
## (Intercept)                 -4.78197   0.19709 -24.26310  9.8977 3.796e-10 ***
## b018201Once in a while       1.94536   0.20702   9.39713 26.0267 7.539e-10 ***
## b018201Half the time         3.13919   0.15354  20.44574 38.9522 &lt; 2.2e-16 ***
## b018201All or most of time   3.63098   0.17657  20.56340 26.7407 &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

---

Let's Try EdSurveyGPT
========================================================

- What are the differences between logit.sdf, glm.sdf and probit.sdf?

- Can EdSurvey run Wald test? What is Wald test and what is it useful for?

---

class: inverse, section-slide

Wrap Up
========================================================
&lt;hr class="sectionSlide"&gt;
.logoSection[
&lt;img src="presentationFigures/naepLogo.png" width="80%" height="80%" /&gt;
]
---

Learning EdSurvey
========================================================

- Reading vignettes provided in training materials


```r
vignette("introduction", package="EdSurvey")

# There are additional functions that we couldn't cover!
gap() #gap analysis
cor.sdf() # Bivariate correlations using "Pearson", "Spearman", "polychoric", or "polyserial" methods
edsurveyTable2pdf() # creating production ready summary tables
cbind(), rbind(), append(), merge() # useful functions in processing data
```

- R help

```r
help(package = "EdSurvey")
```

- [EdSurvey Website](https://www.air.org/page/edsurvey-installation-and-use)

- [EdSurvey Github](https://github.com/American-Institutes-for-Research/EdSurvey)

- [NAEP Data Training Workshop](http://naep-research.airprojects.org/Opportunities/Training)

---

Under Development
========================================================

- Package is still under development
  - Subsequent releases of the EdSurvey package will provide additional functionality 

- Your feedback is important to us!

---

Contact Information
========================================================

EdSurvey Package Help
- https://github.com/American-Institutes-for-Research/EdSurvey

EdSurvey Package Help on NCES.ed.gov
- http://nces.ed.gov/nationsreportcard/contactus.aspx

Ting Zhang
- tzhang@air.org

Paul Bailey
- pbailey@air.org

Emmanuel Sikali
- Emmanuel.Sikali@ed.gov

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
